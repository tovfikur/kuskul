# Finance Module Page Design (Desktop-first)

## Global Styles (applies to all /finance pages)
- Design system: MUI theme
  - Primary: `#1976d2`, Secondary: `#9c27b0`
  - Background: default `#f5f5f5`, surface/paper `#ffffff`
  - Typography: Roboto / system sans; button text case: normal (no uppercase)
  - Radii: Button 8px, Paper 12px
- Table pattern: sticky header, dense rows optional, right-aligned money columns, inline filters above table.
- Money formatting: currency prefix from school settings (fallback to configured default), thousand separators, negatives for refunds.

---

## Page: Finance Workspace (/finance)
### Layout
- Primary layout: 2-row structure (header + content) using CSS Grid.
  - Row 1: page title + quick actions.
  - Row 2: tabbed workspace.
- Spacing: 24px outer padding; 16px section gaps.
- Responsive: stays desktop-first; at <900px tabs become scrollable; KPI cards wrap to 2 columns.

### Meta Information
- Title: `Finance | School Management`
- Description: `Fees, invoices, payments, dues, discounts, and reports.`
- Open Graph: title mirrors page title; description mirrors meta description.

### Page Structure
1) **Header strip**
- Left: Page title “Finance” + active school badge.
- Right: Primary actions (permission-gated)
  - “Collect Payment”, “Issue Invoice”, “Recalculate Dues”, “Export”.

2) **KPI cards (top)**
- 4 cards in a row (wrap as needed): Collected, Refunded, Net, Total Due.
- Each card: value, period selector (This month / Custom), small trend caption.

3) **Tabbed Workspace**
Tabs (same route; state kept in URL query `?tab=`):
- Fees
  - Filters: Academic year, Class.
  - Table: Name, Amount, Due date, Actions.
  - Dialog: create/edit fee structure.
- Invoices
  - Filters: Status, Academic year, Class, Student search.
  - Table: Invoice no/id, Student, Status, Net, Issue date, Actions (Issue/Void/View).
  - Dialog: “Generate invoices” (scope selection + preview counts).
- Payments
  - Filters: Date range, Student, Method.
  - Table: Date, Student, Amount, Method, Reference, Refund flag, Actions (Receipt/Refund).
  - Dialog: collect payment (student picker + amount + method + reference).
- Dues
  - Filters: Status (due/overdue/partial), Class.
  - Table: Student, Due, Status, Last calculated, Actions (Open ledger).
- Discounts
  - Table: Discount name, Type, Value, Actions.
  - Drawer: apply/remove discount to a student.
- Reports
  - Presets list: Collection summary, Due list, Payment history, Class-wise collection.
  - Report runner: required inputs + “Run” button; results table + export.

### Interaction & States
- All write actions show permission tooltip when disabled.
- Empty states: show explanation + CTA (e.g., “No fee structures yet → Create”).
- Loading: skeleton tables + KPI placeholders.

---

## Page: Student Finance Ledger (/finance/students/:studentId)
### Layout
- Left-right split (desktop):
  - Left (fixed ~320px): student summary + actions.
  - Right (fluid): ledger timeline + tabs.
- Responsive: at <900px stack summary on top.

### Meta Information
- Title: `Student Ledger | Finance`
- Description: `Student invoices, payments, dues, and discounts.`

### Sections & Components
1) **Student Summary Card**
- Identity: name, admission no, class/section, academic year.
- Balance block: total fee, discounts, paid, due (color-coded).

2) **Quick Actions (role-gated)**
- Collect payment, Refund payment, Apply discount, View documents.

3) **Ledger Timeline**
- Combined list (newest first) of: invoice issued, payment, refund, due recalculation.
- Filters: date range, type.

---

## Page: Document Viewer (/finance/documents/:type/:id)
### Layout
- Centered “paper” canvas (A4-like) inside a scroll container.
- Top action bar: Back, Print, Download.

### Meta Information
- Title: `Invoice/Receipt | Finance`
- Description: `Printable finance document.`

### Document Sections
- School header: logo (if present), school name, address.
- Student block: student name, admission no, class, academic year.
- Line items table: label, amount; totals row.
- Audit footer: generated date, generated by.
- Note: permissions enforced; direct-link access must validate school